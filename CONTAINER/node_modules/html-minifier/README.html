<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="htmlminifier">HTMLMinifier</h1>
<p><a href="https://www.npmjs.com/package/html-minifier"><img src="https://img.shields.io/npm/v/html-minifier.svg" alt="NPM version" /></a> <a href="https://travis-ci.org/kangax/html-minifier"><img src="https://img.shields.io/travis/kangax/html-minifier.svg" alt="Build Status" /></a> <a href="https://david-dm.org/kangax/html-minifier"><img src="https://img.shields.io/david/kangax/html-minifier.svg" alt="Dependency Status" /></a></p>
<p><a href="https://kangax.github.io/html-minifier/">HTMLMinifier</a> is a highly <strong>configurable</strong>, <strong>well-tested</strong>, JavaScript-based HTML minifier.</p>
<p>See <a href="http://perfectionkills.com/experimenting-with-html-minifier/">corresponding blog post</a> for all the gory details of <a href="http://perfectionkills.com/experimenting-with-html-minifier/#how_it_works">how it works</a>, <a href="http://perfectionkills.com/experimenting-with-html-minifier/#options">description of each option</a>, <a href="http://perfectionkills.com/experimenting-with-html-minifier/#field_testing">testing results</a> and <a href="http://perfectionkills.com/experimenting-with-html-minifier/#cost_and_benefits">conclusions</a>.</p>
<p><a href="https://kangax.github.io/html-minifier/tests/">Test suite is available online</a>.</p>
<p>Also see corresponding <a href="https://github.com/stereobooster/html_minifier">Ruby wrapper</a>, and for Node.js, <a href="https://github.com/gruntjs/grunt-contrib-htmlmin">Grunt plugin</a>, <a href="https://github.com/jonschlinkert/gulp-htmlmin">Gulp module</a>, <a href="https://github.com/koajs/html-minifier">Koa middleware wrapper</a> and <a href="https://github.com/melonmanchan/express-minify-html">Express middleware wrapper</a>.</p>
<p>For lint-like capabilities take a look at <a href="https://github.com/kangax/html-lint">HTMLLint</a>.</p>
<h2 id="minification-comparison">Minification comparison</h2>
<p>How does HTMLMinifier compare to other solutions — <a href="http://www.willpeavy.com/minifier/">HTML Minifier from Will Peavy</a> (1st result in <a href="https://www.google.com/#q=html+minifier">Google search for “html minifier”</a>) as well as <a href="http://htmlcompressor.com">htmlcompressor.com</a> and <a href="https://github.com/Swaagie/minimize">minimize</a>?</p>
<table>
<thead>
<tr class="header">
<th>Site</th>
<th style="text-align: center;">Original size <em>(KB)</em></th>
<th style="text-align: right;">HTMLMinifier</th>
<th style="text-align: right;">minimize</th>
<th style="text-align: right;">Will Peavy</th>
<th style="text-align: right;">htmlcompressor.com</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.google.com/">Google</a></td>
<td style="text-align: center;">48</td>
<td style="text-align: right;"><strong>44</strong></td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">48</td>
</tr>
<tr class="even">
<td><a href="https://github.com/kangax/html-minifier">HTMLMinifier</a></td>
<td style="text-align: center;">154</td>
<td style="text-align: right;"><strong>117</strong></td>
<td style="text-align: right;">128</td>
<td style="text-align: right;">133</td>
<td style="text-align: right;">128</td>
</tr>
<tr class="odd">
<td><a href="https://twitter.com/">Twitter</a></td>
<td style="text-align: center;">203</td>
<td style="text-align: right;"><strong>162</strong></td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">219</td>
<td style="text-align: right;">195</td>
</tr>
<tr class="even">
<td><a href="https://stackoverflow.com/">Stack Overflow</a></td>
<td style="text-align: center;">254</td>
<td style="text-align: right;"><strong>196</strong></td>
<td style="text-align: right;">208</td>
<td style="text-align: right;">216</td>
<td style="text-align: right;">205</td>
</tr>
<tr class="odd">
<td><a href="https://getbootstrap.com/docs/3.3/css/">Bootstrap CSS</a></td>
<td style="text-align: center;">271</td>
<td style="text-align: right;"><strong>260</strong></td>
<td style="text-align: right;">269</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">269</td>
</tr>
<tr class="even">
<td><a href="https://www.bbc.co.uk/">BBC</a></td>
<td style="text-align: center;">288</td>
<td style="text-align: right;"><strong>230</strong></td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">272</td>
</tr>
<tr class="odd">
<td><a href="https://www.amazon.co.uk/">Amazon</a></td>
<td style="text-align: center;">508</td>
<td style="text-align: right;"><strong>439</strong></td>
<td style="text-align: right;">495</td>
<td style="text-align: right;">501</td>
<td style="text-align: right;">n/a</td>
</tr>
<tr class="even">
<td><a href="https://en.wikipedia.org/wiki/President_of_the_United_States">Wikipedia</a></td>
<td style="text-align: center;">533</td>
<td style="text-align: right;"><strong>434</strong></td>
<td style="text-align: right;">517</td>
<td style="text-align: right;">536</td>
<td style="text-align: right;">517</td>
</tr>
<tr class="odd">
<td><a href="https://mathiasbynens.be/_tmp/nyt.html">New York Times</a></td>
<td style="text-align: center;">699</td>
<td style="text-align: right;"><strong>619</strong></td>
<td style="text-align: right;">693</td>
<td style="text-align: right;">683</td>
<td style="text-align: right;">n/a</td>
</tr>
<tr class="even">
<td><a href="https://www.nbc.com/">NBC</a></td>
<td style="text-align: center;">700</td>
<td style="text-align: right;"><strong>657</strong></td>
<td style="text-align: right;">698</td>
<td style="text-align: right;">699</td>
<td style="text-align: right;">n/a</td>
</tr>
<tr class="odd">
<td><a href="https://eloquentjavascript.net/1st_edition/print.html">Eloquent Javascript</a></td>
<td style="text-align: center;">870</td>
<td style="text-align: right;"><strong>815</strong></td>
<td style="text-align: right;">840</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">n/a</td>
</tr>
<tr class="even">
<td><a href="https://kangax.github.io/compat-table/es6/">ES6 table</a></td>
<td style="text-align: center;">5308</td>
<td style="text-align: right;"><strong>4529</strong></td>
<td style="text-align: right;">5025</td>
<td style="text-align: right;">n/a</td>
<td style="text-align: right;">n/a</td>
</tr>
<tr class="odd">
<td><a href="https://tc39.github.io/ecma262/">ES draft</a></td>
<td style="text-align: center;">6082</td>
<td style="text-align: right;"><strong>5456</strong></td>
<td style="text-align: right;">5624</td>
<td style="text-align: right;">n/a</td>
<td style="text-align: right;">n/a</td>
</tr>
</tbody>
</table>
<h2 id="options-quick-reference">Options Quick Reference</h2>
<p>Most of the options are disabled by default.</p>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 29%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>caseSensitive</code></td>
<td>Treat attributes in case sensitive manner (useful for custom HTML tags)</td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>collapseBooleanAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#collapse_boolean_attributes">Omit attribute values from boolean attributes</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>collapseInlineTagWhitespace</code></td>
<td>Don’t leave any spaces between <code>display:inline;</code> elements when collapsing. Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>collapseWhitespace</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#collapse_whitespace">Collapse white space that contributes to text nodes in a document tree</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>conservativeCollapse</code></td>
<td>Always collapse to 1 space (never remove it entirely). Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>customAttrAssign</code></td>
<td>Arrays of regex’es that allow to support custom attribute assign expressions (e.g. <code>'&lt;div flex?="{{mode != cover}}"&gt;&lt;/div&gt;'</code>)</td>
<td><code>[ ]</code></td>
</tr>
<tr class="odd">
<td><code>customAttrCollapse</code></td>
<td>Regex that specifies custom attribute to strip newlines from (e.g. <code>/ng-class/</code>)</td>
<td></td>
</tr>
<tr class="even">
<td><code>customAttrSurround</code></td>
<td>Arrays of regex’es that allow to support custom attribute surround expressions (e.g. <code>&lt;input {{#if value}}checked="checked"{{/if}}&gt;</code>)</td>
<td><code>[ ]</code></td>
</tr>
<tr class="odd">
<td><code>customEventAttributes</code></td>
<td>Arrays of regex’es that allow to support custom event attributes for <code>minifyJS</code> (e.g. <code>ng-click</code>)</td>
<td><code>[ /^on[a-z]{3,}$/ ]</code></td>
</tr>
<tr class="even">
<td><code>decodeEntities</code></td>
<td>Use direct Unicode characters whenever possible</td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>html5</code></td>
<td>Parse input according to HTML5 specifications</td>
<td><code>true</code></td>
</tr>
<tr class="even">
<td><code>ignoreCustomComments</code></td>
<td>Array of regex’es that allow to ignore certain comments, when matched</td>
<td><code>[ /^!/ ]</code></td>
</tr>
<tr class="odd">
<td><code>ignoreCustomFragments</code></td>
<td>Array of regex’es that allow to ignore certain fragments, when matched (e.g. <code>&lt;?php ... ?&gt;</code>, <code>{{ ... }}</code>, etc.)</td>
<td><code>[ /&lt;%[\s\S]*?%&gt;/, /&lt;\?[\s\S]*?\?&gt;/ ]</code></td>
</tr>
<tr class="even">
<td><code>includeAutoGeneratedTags</code></td>
<td>Insert tags generated by HTML parser</td>
<td><code>true</code></td>
</tr>
<tr class="odd">
<td><code>keepClosingSlash</code></td>
<td>Keep the trailing slash on singleton elements</td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>maxLineLength</code></td>
<td>Specify a maximum line length. Compressed output will be split by newlines at valid HTML split-points</td>
<td></td>
</tr>
<tr class="odd">
<td><code>minifyCSS</code></td>
<td>Minify CSS in style elements and style attributes (uses <a href="https://github.com/jakubpawlowicz/clean-css">clean-css</a>)</td>
<td><code>false</code> (could be <code>true</code>, <code>Object</code>, <code>Function(text, type)</code>)</td>
</tr>
<tr class="even">
<td><code>minifyJS</code></td>
<td>Minify JavaScript in script elements and event attributes (uses <a href="https://github.com/mishoo/UglifyJS2">UglifyJS</a>)</td>
<td><code>false</code> (could be <code>true</code>, <code>Object</code>, <code>Function(text, inline)</code>)</td>
</tr>
<tr class="odd">
<td><code>minifyURLs</code></td>
<td>Minify URLs in various attributes (uses <a href="https://github.com/stevenvachon/relateurl">relateurl</a>)</td>
<td><code>false</code> (could be <code>String</code>, <code>Object</code>, <code>Function(text)</code>)</td>
</tr>
<tr class="even">
<td><code>preserveLineBreaks</code></td>
<td>Always collapse to 1 line break (never remove it entirely) when whitespace between tags include a line break. Must be used in conjunction with <code>collapseWhitespace=true</code></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>preventAttributesEscaping</code></td>
<td>Prevents the escaping of the values of attributes</td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>processConditionalComments</code></td>
<td>Process contents of conditional comments through minifier</td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>processScripts</code></td>
<td>Array of strings corresponding to types of script elements to process through minifier (e.g. <code>text/ng-template</code>, <code>text/x-handlebars-template</code>, etc.)</td>
<td><code>[ ]</code></td>
</tr>
<tr class="even">
<td><code>quoteCharacter</code></td>
<td>Type of quote to use for attribute values (’ or ")</td>
<td></td>
</tr>
<tr class="odd">
<td><code>removeAttributeQuotes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_attribute_quotes">Remove quotes around attributes when possible</a></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>removeComments</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_comments">Strip HTML comments</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>removeEmptyAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_or_blank_attributes">Remove all attributes with whitespace-only values</a></td>
<td><code>false</code> (could be <code>true</code>, <code>Function(attrName, tag)</code>)</td>
</tr>
<tr class="even">
<td><code>removeEmptyElements</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_elements">Remove all elements with empty contents</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>removeOptionalTags</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_optional_tags">Remove optional tags</a></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>removeRedundantAttributes</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#remove_redundant_attributes">Remove attributes when value matches default.</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>removeScriptTypeAttributes</code></td>
<td>Remove <code>type="text/javascript"</code> from <code>script</code> tags. Other <code>type</code> attribute values are left intact</td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>removeStyleLinkTypeAttributes</code></td>
<td>Remove <code>type="text/css"</code> from <code>style</code> and <code>link</code> tags. Other <code>type</code> attribute values are left intact</td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>removeTagWhitespace</code></td>
<td>Remove space between attributes whenever possible. <strong>Note that this will result in invalid HTML!</strong></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>sortAttributes</code></td>
<td><a href="#sorting-attributes--style-classes">Sort attributes by frequency</a></td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>sortClassName</code></td>
<td><a href="#sorting-attributes--style-classes">Sort style classes by frequency</a></td>
<td><code>false</code></td>
</tr>
<tr class="even">
<td><code>trimCustomFragments</code></td>
<td>Trim white space around <code>ignoreCustomFragments</code>.</td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>useShortDoctype</code></td>
<td><a href="http://perfectionkills.com/experimenting-with-html-minifier/#use_short_doctype">Replaces the <code>doctype</code> with the short (HTML5) doctype</a></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="sorting-attributes-style-classes">Sorting attributes / style classes</h3>
<p>Minifier options like <code>sortAttributes</code> and <code>sortClassName</code> won’t impact the plain-text size of the output. However, they form long repetitive chains of characters that should improve compression ratio of gzip used in HTTP compression.</p>
<h2 id="special-cases">Special cases</h2>
<h3 id="ignoring-chunks-of-markup">Ignoring chunks of markup</h3>
<p>If you have chunks of markup you would like preserved, you can wrap them <code>&lt;!-- htmlmin:ignore --&gt;</code>.</p>
<h3 id="preserving-svg-tags">Preserving SVG tags</h3>
<p>SVG tags are automatically recognized, and when they are minified, both case-sensitivity and closing-slashes are preserved, regardless of the minification settings used for the rest of the file.</p>
<h3 id="working-with-invalid-markup">Working with invalid markup</h3>
<p>HTMLMinifier <strong>can’t work with invalid or partial chunks of markup</strong>. This is because it parses markup into a tree structure, then modifies it (removing anything that was specified for removal, ignoring anything that was specified to be ignored, etc.), then it creates a markup out of that tree and returns it.</p>
<p>Input markup (e.g. <code>&lt;p id=""&gt;foo</code>)</p>
<p>↓</p>
<p>Internal representation of markup in a form of tree (e.g. <code>{ tag: "p", attr: "id", children: ["foo"] }</code>)</p>
<p>↓</p>
<p>Transformation of internal representation (e.g. removal of <code>id</code> attribute)</p>
<p>↓</p>
<p>Output of resulting markup (e.g. <code>&lt;p&gt;foo&lt;/p&gt;</code>)</p>
<p>HTMLMinifier can’t know that original markup was only half of the tree; it does its best to try to parse it as a full tree and it loses information about tree being malformed or partial in the beginning. As a result, it can’t create a partial/malformed tree at the time of the output.</p>
<h2 id="installation-instructions">Installation Instructions</h2>
<p>From NPM for use as a command line app:</p>
<pre class="shell"><code>npm install html-minifier -g</code></pre>
<p>From NPM for programmatic use:</p>
<pre class="shell"><code>npm install html-minifier</code></pre>
<p>From Git:</p>
<pre class="shell"><code>git clone git://github.com/kangax/html-minifier.git
cd html-minifier
npm link .</code></pre>
<h2 id="usage">Usage</h2>
<p>Note that almost all options are disabled by default. For command line usage please see <code>html-minifier --help</code> for a list of available options. Experiment and find what works best for you and your project.</p>
<ul>
<li><strong>Sample command line:</strong> <code>html-minifier --collapse-whitespace --remove-comments --remove-optional-tags --remove-redundant-attributes --remove-script-type-attributes --remove-tag-whitespace --use-short-doctype --minify-css true --minify-js true</code></li>
</ul>
<h3 id="node.js">Node.js</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> minify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;html-minifier&#39;</span>).<span class="at">minify</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">var</span> result <span class="op">=</span> <span class="at">minify</span>(<span class="st">&#39;&lt;p title=&quot;blah&quot; id=&quot;moo&quot;&gt;foo&lt;/p&gt;&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">removeAttributeQuotes</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">result<span class="op">;</span> <span class="co">// &#39;&lt;p title=blah id=moo&gt;foo&lt;/p&gt;&#39;</span></a></code></pre></div>
<h2 id="running-benchmarks">Running benchmarks</h2>
<p>Benchmarks for minified HTML:</p>
<pre class="shell"><code>node benchmark.js</code></pre>
</body>
</html>
