<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><a href="http://promisesaplus.com/"> <img src="https://promises-aplus.github.io/promises-spec/assets/logo-small.png" align="right" alt="Promises/A+ logo" /> </a></p>
<h1 id="request-promise-core">request-promise-core</h1>
<p><a href="https://gitter.im/request/request-promise?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://img.shields.io/badge/gitter-join_chat-blue.svg?style=flat-square&amp;maxAge=2592000" alt="Gitter" /></a> <a href="https://travis-ci.org/request/promise-core"><img src="https://img.shields.io/travis/request/promise-core/master.svg?style=flat-square&amp;maxAge=2592000" alt="Build Status" /></a> <a href="https://coveralls.io/r/request/promise-core"><img src="https://img.shields.io/coveralls/request/promise-core.svg?style=flat-square&amp;maxAge=2592000" alt="Coverage Status" /></a> <a href="https://david-dm.org/request/promise-core"><img src="https://img.shields.io/david/request/promise-core.svg?style=flat-square&amp;maxAge=2592000" alt="Dependency Status" /></a> <a href="https://snyk.io/test/npm/promise-core"><img src="https://snyk.io/test/npm/promise-core/badge.svg?style=flat-square&amp;maxAge=2592000" alt="Known Vulnerabilities" /></a></p>
<p>This package is the core for the following packages:</p>
<ul>
<li><a href="https://github.com/request/request-promise"><code>request-promise</code></a></li>
<li><a href="https://github.com/request/request-promise-any"><code>request-promise-any</code></a></li>
<li><a href="https://github.com/request/request-promise-bluebird"><code>request-promise-bluebird</code></a></li>
<li><a href="https://github.com/request/request-promise-native"><code>request-promise-native</code></a></li>
</ul>
<p><code>request-promise-core</code> contains the core logic to add Promise support to <a href="https://github.com/request/request"><code>request</code></a>.</p>
<p>Please use one of the libraries above. It is only recommended to use this library directly, if you have very specific requirements.</p>
<h2 id="installation-for-request2.34">Installation for <code>request@^2.34</code></h2>
<p>This module is installed via npm:</p>
<pre><code>npm install --save request
npm install --save request-promise-core</code></pre>
<p><code>request</code> is defined as a peer-dependency and thus has to be installed separately.</p>
<h2 id="usage-for-request2.34">Usage for <code>request@^2.34</code></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// 1. Load the request library</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">// Only use a direct require if you are 100% sure that:</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">// - Your project does not use request directly. That is without the Promise capabilities by calling require(&#39;request&#39;).</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">// - Any of the installed libraries use request.</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">// ...because Request&#39;s prototype will be patched in step 2.</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">/* var request = require(&#39;request&#39;); */</span></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">// Instead use:</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw">var</span> stealthyRequire <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;stealthy-require&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="kw">var</span> request <span class="op">=</span> <span class="at">stealthyRequire</span>(<span class="va">require</span>.<span class="at">cache</span><span class="op">,</span> <span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="cf">return</span> <span class="at">require</span>(<span class="st">&#39;request&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-14" title="14"></a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">// 2. Add Promise support to request</span></a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="kw">var</span> configure <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;request-promise-core/configure/request2&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="at">configure</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-21" title="21">    <span class="dt">request</span><span class="op">:</span> request<span class="op">,</span></a>
<a class="sourceLine" id="cb2-22" title="22">    <span class="co">// Pass your favorite ES6-compatible promise implementation</span></a>
<a class="sourceLine" id="cb2-23" title="23">    <span class="dt">PromiseImpl</span><span class="op">:</span> Promise<span class="op">,</span></a>
<a class="sourceLine" id="cb2-24" title="24">    <span class="co">// Expose all methods of the promise instance you want to call on the request(...) call</span></a>
<a class="sourceLine" id="cb2-25" title="25">    <span class="dt">expose</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb2-26" title="26">        <span class="st">&#39;then&#39;</span><span class="op">,</span>   <span class="co">// Allows to use request(...).then(...)</span></a>
<a class="sourceLine" id="cb2-27" title="27">        <span class="st">&#39;catch&#39;</span><span class="op">,</span>  <span class="co">// Allows to use request(...).catch(...)</span></a>
<a class="sourceLine" id="cb2-28" title="28">        <span class="st">&#39;promise&#39;</span> <span class="co">// Allows to use request(...).promise() which returns the promise instance</span></a>
<a class="sourceLine" id="cb2-29" title="29">    ]<span class="op">,</span></a>
<a class="sourceLine" id="cb2-30" title="30">    <span class="co">// Optional: Pass a callback that is called within the Promise constructor</span></a>
<a class="sourceLine" id="cb2-31" title="31">    <span class="dt">constructorMixin</span><span class="op">:</span> <span class="kw">function</span> (resolve<span class="op">,</span> reject) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-32" title="32">        <span class="co">// `this` is the request object</span></a>
<a class="sourceLine" id="cb2-33" title="33">        <span class="co">// Additional arguments may be passed depending on the PromiseImpl used</span></a>
<a class="sourceLine" id="cb2-34" title="34">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37"></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="co">// 3. Use request with its promise capabilities</span></a>
<a class="sourceLine" id="cb2-39" title="39"></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="co">// E.g. crawl a web page:</span></a>
<a class="sourceLine" id="cb2-41" title="41"><span class="at">request</span>(<span class="st">&#39;http://www.google.com&#39;</span>)</a>
<a class="sourceLine" id="cb2-42" title="42">    .<span class="at">then</span>(<span class="kw">function</span> (htmlString) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-43" title="43">        <span class="co">// Process html...</span></a>
<a class="sourceLine" id="cb2-44" title="44">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb2-45" title="45">    .<span class="at">catch</span>(<span class="kw">function</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-46" title="46">        <span class="co">// Crawling failed...</span></a>
<a class="sourceLine" id="cb2-47" title="47">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="installation-and-usage-for-requestnext">Installation and Usage for <code>request@next</code></h2>
<p><a href="https://github.com/request/request/issues/1982">Request Next</a> is still in alpha. However, <code>request-promise-core</code> is already designed to be compatible and ships with a configuration helper – <code>require('request-promise-core/configure/request-next')</code> – that is <a href="https://github.com/request/request-promise/blob/next/lib/rp.js">used by <code>request-promise</code></a> in its “next” branch.</p>
<h2 id="contributing">Contributing</h2>
<p>To set up your development environment:</p>
<ol type="1">
<li>clone the repo to your desktop,</li>
<li>in the shell <code>cd</code> to the main folder,</li>
<li>hit <code>npm install</code>,</li>
<li>hit <code>npm install gulp -g</code> if you haven’t installed gulp globally yet, and</li>
<li>run <code>gulp dev</code>. (Or run <code>node ./node_modules/.bin/gulp dev</code> if you don’t want to install gulp globally.)</li>
</ol>
<p><code>gulp dev</code> watches all source files and if you save some changes it will lint the code and execute all tests. The test coverage report can be viewed from <code>./coverage/lcov-report/index.html</code>.</p>
<p>If you want to debug a test you should use <code>gulp test-without-coverage</code> to run all tests without obscuring the code by the test coverage instrumentation.</p>
<h2 id="change-history">Change History</h2>
<ul>
<li>1.1.4 (2020-07-21)
<ul>
<li>Security fix: bumped <code>lodash</code> to <code>^4.17.19</code> following <a href="https://www.npmjs.com/advisories/1523">this advisory</a>.</li>
</ul></li>
<li>1.1.3 (2019-11-03)
<ul>
<li>Security fix: bumped <code>lodash</code> to <code>^4.17.15</code>. See <a href="https://snyk.io/vuln/search?q=lodash&amp;type=npm">vulnerabilty reports</a>. <em>(Thanks to <span class="citation" data-cites="daniel-nagy">@daniel-nagy</span> for pull request <a href="https://github.com/request/promise-core/pull/20">#20</a> and thanks to <span class="citation" data-cites="quetzaluz">@quetzaluz</span> for reporting this in issue <a href="https://github.com/request/promise-core/issues/21">#21</a>.)</em></li>
</ul></li>
<li>1.1.2 (2019-02-14)
<ul>
<li>Security fix: bumped <code>lodash</code> to <code>^4.17.11</code>. See <a href="https://snyk.io/vuln/search?q=lodash&amp;type=npm">vulnerabilty reports</a>. <em>(Thanks to <span class="citation" data-cites="lucaswillering">@lucaswillering</span> and <span class="citation" data-cites="sam-warren-finnair">@sam-warren-finnair</span> for reporting this in issues <a href="https://github.com/request/promise-core/issues/12">#12</a> and <a href="https://github.com/request/promise-core/issues/13">#13</a> and thanks to <span class="citation" data-cites="Alec321">@Alec321</span> for pull request <a href="https://github.com/request/promise-core/pull/14">#14</a>.)</em></li>
</ul></li>
<li>1.1.1 (2016-08-08)
<ul>
<li>Renamed package to <code>request-promise-core</code> because there were <a href="https://github.com/request/request-promise/issues/137">too</a> <a href="https://github.com/request/request-promise/issues/141">many</a> issues with the scoped package name <code>@request/promise-core</code></li>
</ul></li>
<li>1.1.0 (2016-07-30)
<ul>
<li>Added <code>constructorMixin</code> option to enable <a href="https://github.com/request/request-promise/pull/123">request/request-promise#123</a></li>
</ul></li>
<li>1.0.0 (2016-07-15)
<ul>
<li>All tests green, ready for prime time</li>
</ul></li>
<li>1.0.0-rc.1 (2016-07-10)
<ul>
<li>Reimplementation of core logic based on <code>request-promise@3.0.0</code></li>
<li>Plus <code>transform2xxOnly</code> option (fixes <a href="https://github.com/request/request-promise/issues/131">request/request-promise#131</a>)</li>
</ul></li>
</ul>
<h2 id="license-isc">License (ISC)</h2>
<p>In case you never heard about the <a href="http://en.wikipedia.org/wiki/ISC_license">ISC license</a> it is functionally equivalent to the MIT license.</p>
<p>See the <a href="LICENSE">LICENSE file</a> for details.</p>
</body>
</html>
